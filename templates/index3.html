<script>
    // Text-to-Speech (TTS) function
    function speakText(text) {
      const speech = new SpeechSynthesisUtterance(text);
      speech.voice = speechSynthesis.getVoices().find(voice => voice.name === 'Google UK English Male');
      speech.volume = 1;
      speech.rate = 1;
      speech.pitch = 1;
      window.speechSynthesis.speak(speech);
    }

    // Function to fetch the latest answer from the server
    function fetchLatestAnswer() {
      fetch('/latest-answer')
        .then(response => response.json())
        .then(data => {
          const answer = data.answer;
          if (answer) {
            document.getElementById('answer-text').innerText = answer;
            speakText(answer);
          }
        })
        .catch(error => {
          console.error('Error fetching the latest answer:', error);
        });
    }

    // Set up an interval to poll for the latest answer every 5 seconds
    setInterval(fetchLatestAnswer, 5000);

    window.onload = function() {
      const initialAnswer = "{{ answer }}";
      if (initialAnswer) {
        speakText(initialAnswer);
      }
    };
</script>
